- discounted_type = user.class.to_s

- discounted_id   = discounted_type != "ShopDiscountable" ? user.id          : user.discounted_id
- discountable_id = discounted_type != "ShopDiscountable" ? nil              : user.id
- success_element = discounted_type != "ShopDiscountable" ? 'discount_users' : 'available_users'
- class_type      = discounted_type != "ShopDiscountable" ? 'available'      : 'discounted'

%li.product{:class => "discountable #{class_type} user", :id => "#{class_type}_#{user.id}", :'data-discounted_id' => discounted_id, :'data-discounted_type' => discounted_type, :'data-discounted_type_human' => 'User', :'data-discountable_id' => discountable_id, :'data-success_element' => success_element }
  %span.name= truncate((user.name rescue user.discounted.name), 30, '...')
  .actions
    %span.delete